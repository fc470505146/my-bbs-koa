(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-43bd0002"],{"2bfc":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"board-view-wrapper"},[a("div",{staticClass:"view-column"},[a("el-row",{staticClass:"column-title",attrs:{type:"flex",justify:"start",align:"middle"}},[a("el-col",{attrs:{span:5}},[t._v(" #"+t._s(t.board.boardName)+" ")]),a("el-col",{attrs:{span:4}},[a("el-button",{staticClass:"block",attrs:{type:"danger",size:"mini",icon:"el-icon-edit"},on:{click:t.handleAddPostClick}},[t._v("发帖")])],1)],1),a("el-row",{staticClass:"column-description"},[a("el-col",{attrs:{span:24}},[t._v(" 话题介绍: "),a("span",{staticClass:"description-content"},[t._v(t._s(t.board.description))])])],1)],1),a("div",{staticClass:"view-content"},[a("el-row",{staticClass:"content-header",attrs:{type:"flex",justify:"space-between"}},[a("el-col",{attrs:{span:10}},[t._v("标题")]),a("el-col",{attrs:{span:3}},[t._v("作者")]),a("el-col",{attrs:{span:3}},[t._v("时间")]),t.isAdmin?a("el-col",{staticClass:"text-center",attrs:{span:4}},[t._v("操作")]):t._e()],1),a("el-divider",{staticClass:"header-divider"}),a("div",{staticClass:"itemlist_wrapper"},t._l(t.postList,(function(e){return a("div",{key:e._id,staticClass:"item_wrapper"},[a("el-row",{staticClass:"content-post post-item",attrs:{type:"flex",justify:"space-between"}},[a("el-col",{staticClass:"ellipsis post_title",attrs:{span:10}},[a("router-link",{attrs:{to:"/bbs/post/"+e._id}},[a("span",[t._v(t._s(e.title))])])],1),a("el-col",{staticClass:"fs-12",staticStyle:{color:"#1d8fc3"},attrs:{span:3}},[a("router-link",{attrs:{to:"/bbs/user/"+e.User._id}},[t._v(t._s(e.User.nickname))])],1),a("el-col",{staticClass:"fs-12",staticStyle:{color:"#9599b4"},attrs:{span:3}},[t._v(t._s(e.lastDate)+" ")]),t.isAdmin?a("el-col",{staticClass:"text-center",attrs:{span:4}},[a("el-button-group",[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(a){return t.handleUpdatePost(e)}}}),a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-delete"},on:{click:function(a){return t.handleDeletePost(e._id)}}})],1)],1):t._e()],1)],1)})),0)],1),a("BasePagination",{attrs:{pagination:t.pagination},on:{"current-change":t.handlePagination}}),a("el-row",[a("el-col",{staticClass:"foot_placeholder",attrs:{span:24}})],1),a("el-dialog",{attrs:{center:!0,top:"50",title:"发帖",visible:t.AddPost.show},on:{"update:visible":function(e){return t.$set(t.AddPost,"show",e)}}},[a("el-form",{attrs:{model:t.PostItem}},[a("el-form-item",{attrs:{label:"帖子名称"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.PostItem.title,callback:function(e){t.$set(t.PostItem,"title",e)},expression:"PostItem.title"}})],1),a("el-form-item",{attrs:{label:"内容"}},[a("el-input",{attrs:{type:"textarea",rows:3,autocomplete:"off"},model:{value:t.PostItem.description,callback:function(e){t.$set(t.PostItem,"description",e)},expression:"PostItem.description"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.handleAddPostClick}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.handleAddPostClick(),t.subAddPost()}}},[t._v("确 定")])],1)],1),a("BoardViewUpdateDialog",{attrs:{"update-item":t.updateItem,"show-update-post":t.showUpdatePost},on:{close:function(e){t.showUpdatePost=!1},updatePostOk:t.getPostList}})],1)},n=[],o=a("1da1"),i=a("5530"),r=(a("96cf"),a("6646")),c=a("2f62"),l=a("dd87"),u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{center:!0,top:"50",title:"修改帖子",visible:t.show},on:{"update:visible":function(e){t.show=e},close:function(e){return t.$emit("close")}}},[a("el-form",{attrs:{model:t.updatePost}},[a("el-form-item",{attrs:{label:"帖子名称"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.updatePost.title,callback:function(e){t.$set(t.updatePost,"title",e)},expression:"updatePost.title"}})],1),a("el-form-item",{attrs:{label:"优先级"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.updatePost.priority,callback:function(e){t.$set(t.updatePost,"priority",e)},expression:"updatePost.priority"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.clickShowUpdate}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.clickShowUpdate(),t.subUpdatePost()}}},[t._v("确 定")])],1)],1)},p=[],d=(a("a9e3"),a("5c96")),f={name:"BoardViewUpdateDialog",props:{updateItem:{type:Object,default:function(){return{}}},showUpdatePost:Boolean},data:function(){return{updatePost:this.updateItem,show:this.showUpdatePost}},watch:{showUpdatePost:function(){this.show=this.showUpdatePost},updateItem:function(){this.updatePost=Object(i["a"])({},this.updateItem)}},created:function(){},methods:{clickShowUpdate:function(){this.$emit("close")},subUpdatePost:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={_id:t.updatePost._id,title:t.updatePost.title,priority:Number(t.updatePost.priority)},e.next=3,Object(r["p"])(a);case 3:s=e.sent,0===s.code&&(Object(d["Message"])({message:"修改成功",type:"success"}),t.$emit("updatePostOk"));case 5:case"end":return e.stop()}}),e)})))()}}},m=f,h=a("2877"),b=Object(h["a"])(m,u,p,!1,null,"0834c2e4",null),g=b.exports,P={name:"BoardView",components:{BasePagination:l["a"],BoardViewUpdateDialog:g},data:function(){return{board:{boardName:"",description:""},postList:[],pagination:{pageNum:10,total:10,currentPage:1},updateItem:{},showUpdatePost:!1,AddPost:{show:!1},PostItem:{boardId:this.$route.params.id,title:"",description:""}}},computed:Object(i["a"])({},Object(c["b"])(["isAdmin"])),created:function(){this.getBoardInfo(),this.getPostList()},methods:{handleUpdatePost:function(t){this.updateItem=t,this.showUpdatePost=!0},handlePagination:function(t){this.pagination.currentPage=t,this.getPostList()},getBoardInfo:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.$route.params.id,e.next=3,Object(r["j"])({_id:a});case 3:s=e.sent,0===s.code&&(t.board=s.result.data);case 5:case"end":return e.stop()}}),e)})))()},getPostList:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,s,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.$route.params.id,e.next=3,Object(r["n"])({_id:a,pageNum:t.pagination.pageNum,currentPage:t.pagination.currentPage});case 3:s=e.sent,0===s.code&&(n=s.result.data,t.pagination.total=s.result.total,t.postList=n);case 5:case"end":return e.stop()}}),e)})))()},handleDeletePost:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(r["g"])({_id:t});case 2:s=a.sent,0===s.code&&(Object(d["Message"])({message:"删除成功",type:"success"}),e.getPostList());case 4:case"end":return a.stop()}}),a)})))()},handleAddPostClick:function(){this.AddPost.show=!this.AddPost.show},subAddPost:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(r["c"])(t.PostItem);case 2:a=e.sent,0===a.code&&(Object(d["Message"])({message:"发帖成功",type:"success"}),t.getPostList());case 4:case"end":return e.stop()}}),e)})))()},handleClickToPost:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.$store.commit("bbs/UPDATE_CURRENT_POST",t);case 2:case"end":return a.stop()}}),a)})))()}}},w=P,v=(a("e340"),Object(h["a"])(w,s,n,!1,null,"08e3e70b",null));e["default"]=v.exports},"324d":function(t,e,a){},7156:function(t,e,a){var s=a("861d"),n=a("d2bb");t.exports=function(t,e,a){var o,i;return n&&"function"==typeof(o=e.constructor)&&o!==a&&s(i=o.prototype)&&i!==a.prototype&&n(t,i),t}},a9e3:function(t,e,a){"use strict";var s=a("83ab"),n=a("da84"),o=a("94ca"),i=a("6eeb"),r=a("5135"),c=a("c6b6"),l=a("7156"),u=a("c04e"),p=a("d039"),d=a("7c73"),f=a("241c").f,m=a("06cf").f,h=a("9bf2").f,b=a("58a8").trim,g="Number",P=n[g],w=P.prototype,v=c(d(w))==g,_=function(t){var e,a,s,n,o,i,r,c,l=u(t,!1);if("string"==typeof l&&l.length>2)if(l=b(l),e=l.charCodeAt(0),43===e||45===e){if(a=l.charCodeAt(2),88===a||120===a)return NaN}else if(48===e){switch(l.charCodeAt(1)){case 66:case 98:s=2,n=49;break;case 79:case 111:s=8,n=55;break;default:return+l}for(o=l.slice(2),i=o.length,r=0;r<i;r++)if(c=o.charCodeAt(r),c<48||c>n)return NaN;return parseInt(o,s)}return+l};if(o(g,!P(" 0o1")||!P("0b1")||P("+0x1"))){for(var k,I=function(t){var e=arguments.length<1?0:t,a=this;return a instanceof I&&(v?p((function(){w.valueOf.call(a)})):c(a)!=g)?l(new P(_(e)),a,I):_(e)},y=s?f(P):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),C=0;y.length>C;C++)r(P,k=y[C])&&!r(I,k)&&h(I,k,m(P,k));I.prototype=w,w.constructor=I,i(n,g,I)}},dd87:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-pagination",{staticStyle:{"text-align":"center"},attrs:{background:"",layout:"prev, pager, next","page-size":t.pagination.pageNum,total:t.pagination.total},on:{"current-change":t.emitChange}})},n=[],o={name:"BasePagination",props:{pagination:Object},methods:{emitChange:function(t){this.$emit("current-change",t)}}},i=o,r=a("2877"),c=Object(r["a"])(i,s,n,!1,null,"aa7fb590",null);e["a"]=c.exports},e340:function(t,e,a){"use strict";a("324d")}}]);